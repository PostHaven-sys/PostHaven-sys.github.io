import{_ as L}from"./Loading-BsZbSbOU.js";import{P as O}from"./Post-z2mPCFzC.js";import{_ as $,r as c,u as F,c as N,w,o as S,a as o,b as h,d as m,e as l,F as j,f as E,n as x,g as z,t as f,h as A,i as n,j as C,k as e,I as D,p as M}from"./index-BwqGH4qW.js";const T={class:"posts"},U=["disabled"],q={class:"posts_container"},G={key:1,class:"loader_container"},H={key:2,class:"loader"},J={__name:"Posts",setup(K){const g=c(!1);M("updateSub",g);const P=n("theme"),I=n("urlAdressAuth"),V=n("urlAdressPosts"),v=n("searchPosts"),p=n("confirmation"),k=n("user_Id"),a=c([]),y=c({}),r=c(!1),u=c(!1),{t:b}=F(),_=N(()=>a.value.filter(s=>s.title.toLowerCase().includes(v.value.toLowerCase())||s.description.toLowerCase().includes(v.value.toLowerCase()))),d=async()=>{try{const[s,t]=await Promise.all([C.get(`${I}?user_id=${k}`),C.get(V)]);y.value=await s.data[0],a.value=await t.data.reverse(),r.value=t.data.length===0,p.value.subscribe===!0&&(g.value=!0)}catch(s){console.log(s),r.value=!0}},B=()=>{u.value=!0,d()};return w(()=>{p.value.delete===!0&&d()}),w(()=>{p.value.subscribe===!0&&d()}),S(()=>{k&&d()}),(s,t)=>(e(),o("div",T,[h("button",{onClick:t[1]||(t[1]=i=>B()),disabled:u.value,class:"updateBtn"},[u.value?(e(),m(L,{key:0,modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=i=>u.value=i)},null,8,["modelValue"])):(e(),m(l(D),{key:1,icon:"system-uicons:reset",width:"50",height:"50",class:"duration-300 hover:rotate-[-20deg]",style:{color:"#00bd7e"}}))],8,U),h("div",q,[_.value.length!==0&&a.value.length!==0?(e(!0),o(j,{key:0},E(_.value,i=>(e(),m(O,{key:i.id,postOption:i,userOption:y.value},null,8,["postOption","userOption"]))),128)):(e(),o("div",G,[!r.value&&_.value.length===0&&a.value.length>0?(e(),o("h2",{key:0,class:x(l(P)?"input_light":"input_night")},[z(f(l(b)("posts.text1"))+" ",1),h("span",null,'"'+f(l(v))+'"',1)],2)):A("",!0),r.value&&a.value.length===0?(e(),o("h2",{key:1,class:x(l(P)?"input_light":"input_night")},f(l(b)("posts.text2")),3)):!r.value&&a.value.length===0?(e(),o("div",H)):A("",!0)]))])]))}},X=$(J,[["__scopeId","data-v-9e8f2e78"]]);export{X as default};
