import{_ as C,r as u,w as E,o as N,a as n,b as a,l as _,u as r,C as P,n as p,t as f,g as D,s as M,v as W,x as $,z as j,h as b,j as i,q as z,i as g,y as R}from"./index-BofsLPDd.js";import{I as w}from"./Input-CEd2gRZ4.js";const S={class:"edUs-input"},q={key:1,class:"loader_text"},F={class:"edUs-input"},G={class:"edUs-textarea"},H={class:"edUs-input"},J={key:0,type:"button",class:"loadBtn"},K=["disabled"],L={__name:"EditUsers",setup(O){const U=g("adminUser"),d=g("theme"),x=g("urlAdressAuth"),k=g("user_Id"),V=j(),y=R(),h=u(!1),l=u([]),B=u([]),m=u(""),c=u(""),v=u(""),s=u({no:!1,text:!1,oneText:"Этот имя уже занять",twoText:"Этот имя свободно"}),T=async o=>{try{const e=await b.get(x);let t=e.data.find(A=>A.id==o);U===!1&&t.user_id!==k&&y.push("/myProfile"),B.value=e.data,l.value=t,v.value=t.biography}catch(e){console.log(e)}},I=async()=>{h.value=!0;try{(await b.put(`${x}/${l.value.id}`,{user_logo:m.value||l.value.user_logo,user_name:c.value||l.value.user_name,biography:v.value})).status==200&&(h.value=!1,y.go(-1))}catch(o){console.log(o),h.value=!1}};return E(()=>{c.value.length>0?s.value.no=!0:s.value.no=!1;let o=B.value.filter(e=>e.user_name===c.value);s.value.text=o.length>0}),N(()=>{T(V.params.id)}),(o,e)=>(i(),n("section",{class:p(["edit_user",r(d)?"themeBgwhite":"themeBgblack"])},[a("form",{onSubmit:e[3]||(e[3]=$(t=>I(),["prevent"])),class:"edUs"},[_(P,{src:m.value||l.value.user_logo||r(z),width:"220px",height:"220px",style:{overflow:"hidden","border-radius":"50%"},preview:""},null,8,["src"]),a("div",S,[_(w,{type:"text",width:"100%",height:"60px",BgTheme:r(d)?"themeBgWhite":"themeBgBlack",placeholder:"Введите ссылку нового аватара",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t)},null,8,["BgTheme","modelValue"])]),a("h2",null,[l.value.user_name?(i(),n("span",{key:0,class:p(r(d)?"input_light":"input_night")},f(l.value.user_name),3)):(i(),n("div",q))]),a("div",F,[_(w,{type:"text",width:"100%",height:"60px",BgTheme:r(d)?"themeBgWhite":"themeBgBlack",placeholder:"Введите новое имя пользователя",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t)},null,8,["BgTheme","modelValue"]),s.value.no?(i(),n("label",{key:0,class:p(s.value.text?"label-red":"label-green")},f(s.value.text?s.value.oneText:s.value.twoText),3)):D("",!0)]),a("div",G,[M(a("textarea",{placeholder:"Добавить биографию",maxlength:"115",class:p(r(d)?"themeBgWhite input_light":"themeBgBlack input_night"),"onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t)},null,2),[[W,v.value]]),a("b",null,f(v.value.length)+"/115",1)]),a("div",H,[h.value?(i(),n("button",J,e[4]||(e[4]=[a("div",{class:"loader"},null,-1)]))):(i(),n("input",{key:1,type:"submit",value:"Сохранить",disabled:s.value.text},null,8,K))])],32)],2))}},Y=C(L,[["__scopeId","data-v-35f1d94e"]]);export{Y as default};
