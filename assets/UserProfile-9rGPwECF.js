import{_ as j,r as o,u as M,o as R,a as f,b as a,q as D,e,B as Y,C as q,g as E,t as r,h as G,n as l,F as H,f as J,i as x,A as K,z as O,j as y,k as v,s as Q,I as W,d as X}from"./index-BBWZI_i2.js";import{S as Z}from"./ShowPost-DqBuRy5q.js";import"./Post-B1yXMvb0.js";const ee={class:"user_profile_header"},se={class:"other"},te={class:"name"},ae={key:0,class:"loader_text"},re={class:"subscribe_and_chat"},le=["disabled"],ie={key:1},ue={class:"friends_container"},oe={class:"friends"},ne={class:"user_profile_footer"},ce={__name:"UserProfile",setup(de){const i=x("theme"),k=x("urlAdressAuth"),U=x("urlAdressPosts"),w=x("user_Id"),p=x("media"),V=K(),$=O(),C=o(0),N=o(0),I=o(0),S=o(!1),n=o([]),A=o(""),P=o(!1),c=o(!1),_=o([]),g=o([]),{t:u}=M(),z=async t=>{try{const[s,d]=await Promise.all([y.get(k),y.get(U)]);if(s.status!==200)return;let h=s.data.find(m=>m.user_id==t);if(h===void 0){$.push("/posts");return}_.value=h,N.value=h.users_subsribe.length;const b=d.data.filter(m=>m.user_id===h.user_id);if(b.length==0){S.value=!0;return}else g.value=b,L();F(s.data,h.user_id),B()}catch(s){console.log(s)}},B=async()=>{c.value=!0;try{const t=await y.get(`${k}?user_id=${w}`);A.value=t.data[0].id,n.value=t.data[0].users_subsribe,t.status===200&&(P.value=t.data[0].users_subsribe.includes(_.value.user_id)),c.value=!1}catch(t){console.log(t),c.value=!1}},F=(t,s)=>{const d=t.filter(h=>{var b;return(b=h.users_subsribe)==null?void 0:b.some(m=>m===s)});if(d.length==0){I.value=0;return}I.value=d.length},L=()=>{for(let t=0;t<g.value.length;t++)C.value+=g.value[t].like},T=async()=>{c.value=!0;const t=n.value.findIndex(s=>s===_.value.user_id);if(P.value==!0){n.value.splice(t,1);try{(await y.put(`${k}/${A.value}`,{users_subsribe:n.value})).status===200&&(B(),n.value=[])}catch(s){console.log(s),c.value=!1}}else{n.value.push(_.value.user_id);try{(await y.put(`${k}/${A.value}`,{users_subsribe:n.value})).status===200&&(B(),n.value=[])}catch(s){console.log(s),c.value=!0}}};return R(()=>{if(w){if(V.params.id==w){$.push("/myProfile");return}z(V.params.id)}}),(t,s)=>(v(),f("div",{class:l(["user_profile_container",e(i)?"themeBgwhite":"themeBgblack"])},[a("div",ee,[D(q,{src:_.value.user_logo||e(Q),preview:"",width:e(p)?"100px":"220px",height:e(p)?"100px":"220px",balance:"",style:Y([{overflow:"hidden","border-radius":"50%"},{margin:e(p)?"30px 0 0 15px ":"0"}])},null,8,["src","width","height","style"]),a("div",se,[a("h2",te,[E(r(_.value.user_name)+" ",1),_.value.user_name?G("",!0):(v(),f("div",ae))]),a("div",re,[a("button",{onClick:s[0]||(s[0]=d=>T()),disabled:c.value,class:l({"btn-sub_active":P.value})},[c.value==!0?(v(),f("div",{key:0,class:l(e(p)?"loader_text":"loader")},null,2)):(v(),f("span",ie,r(P.value?e(u)("userProfile.text1"):e(u)("userProfile.text2")),1))],10,le),a("button",null,r(e(u)("userProfile.text3")),1)]),a("div",ue,[a("div",oe,[a("h3",{class:l(e(i)?"input_light":"input_night")},r(g.value.length||0)+" "+r(e(u)("userProfile.text4")),3),a("h3",{class:l(e(i)?"input_light":"input_night")},r(C.value||0)+" "+r(e(u)("userProfile.text5")),3),a("h3",{class:l(e(i)?"input_light":"input_night")},r(N.value||0)+" "+r(e(u)("userProfile.text6")),3)]),a("h3",{class:l(e(i)?"input_light":"input_night")},r(I.value)+" "+r(e(u)("userProfile.text7")),3)]),a("p",{class:l(["biographies",e(i)?"input_light":"input_night"])},r(e(u)("userProfile.text8")),3)])]),a("div",ne,[a("div",{class:l(["liked-text",e(i)?"borderLight":"borderNight"])},[a("h2",{class:l(e(i)?"input_light":"input_night")},r(e(u)("userProfile.text9")),3),D(e(W),{icon:"bi:images",width:e(p)?"25":"35",height:e(p)?"25":"35",class:l(e(i)?"input_light":"input_night"),style:{transition:".3s"}},null,8,["width","height","class"])],2),a("div",{class:l(["liked",e(i)?"themeBgwhite":"themeBgblack"])},[S.value===!0?(v(),f("h2",{key:0,class:l(e(i)?"input_light":"input_night")},r(e(u)("userProfile.text10")),3)):(v(!0),f(H,{key:1},J(g.value,d=>(v(),X(Z,{key:d.id,likedId:d.id,userProf:!0},null,8,["likedId"]))),128))],2)])],2))}},pe=j(ce,[["__scopeId","data-v-8de4ca58"]]);export{pe as default};
