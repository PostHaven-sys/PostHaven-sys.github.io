import{_ as C,j as l,a as h,n as a,u as s,F as N,e as $,d as A,i as _,r as g,o as L,h as B,w as E,b as t,l as O,C as R,f as F,t as m,g as V,q as U,A as q,R as z}from"./index-BofsLPDd.js";import{S as M}from"./ShowPost-BsfIwjLg.js";import"./Post-DMIPfUvh.js";const T={__name:"MyPublikation",props:{option:{type:Object}},setup(k){const e=k,v=_("theme");return(P,f)=>(l(),h("div",{class:a(["publications",s(v)?"themeBgwhite":"themeBgblack"])},[e.option.length===0?(l(),h("h2",{key:0,class:a(s(v)?"input_light":"input_night")}," У вас пока нет постов. ",2)):(l(!0),h(N,{key:1},$(k.option,(p,r)=>(l(),A(M,{key:r,likedId:p.image_id,subDis:""},null,8,["likedId"]))),128))],2))}},Y=C(T,[["__scopeId","data-v-51ddf71f"]]),G={__name:"Liked",props:{option:{type:Object},user_id:[String,Number]},setup(k){const e=k,v=_("theme"),P=_("urlAdressPosts"),f=_("urlAdressAuth"),p=g([]),r=g(!1),w=async()=>{try{const i=await B.get(P);if(i.status!==200)return;p.value=i.data.filter(o=>e.option.includes(o.image_id)),x(i.data)}catch(i){console.log(i)}};async function x(i){const o=i.map(d=>d.image_id),u=e.option.filter(d=>o.includes(d));if(e.option.filter(d=>!o.includes(d)).length!==0){r.value=!0;try{await B.put(`${f}/${e.user_id}`,{post_like:u})}catch(d){console.log(d)}}}return L(()=>{e.option.length===0?r.value=!0:(r.value=!1,w())}),(i,o)=>(l(),h("div",{class:a(["liked",s(v)?"themeBgwhite":"themeBgblack"])},[r.value?(l(),h("h2",{key:0,class:a(s(v)?"input_light":"input_night")}," Вы ещё не поставили лайк ни на один пост. ",2)):(l(!0),h(N,{key:1},$(p.value,(u,b)=>(l(),A(M,{key:b,likedId:u.image_id,subDis:"",otherDis:""},null,8,["likedId"]))),128))],2))}},H=C(G,[["__scopeId","data-v-8991f4fd"]]),J={class:"my_profile_header"},K={class:"other"},Q={class:"name"},W={key:0,class:"loader_text"},X={class:"edit_and_settings"},Z=["disabled"],ee={key:0,class:"loader"},te={class:"friends_container"},se={class:"friends"},oe={class:"my_profile_footer"},ie={__name:"MyProfile",setup(k){const e=_("theme"),v=_("urlAdressAuth"),P=_("urlAdressPosts"),f=_("user_Id"),p=_("confirmation"),r=g(0),w=g(0),x=g(0),i=g(!1),o=g([]),u=g([]),b=async()=>{try{const[c,n]=await Promise.all([B.get(v),B.get(P)]);let I=c.data.find(y=>y.user_id===f);o.value=I,w.value=I.users_subsribe.length,u.value=n.data.filter(y=>y.user_id===f),d();const j=c.data.filter(y=>{var D;return(D=y.users_subsribe)==null?void 0:D.some(S=>S===f)});x.value=j.length}catch(c){console.log(c)}},d=()=>{for(let c=0;c<u.value.length;c++)r.value+=u.value[c].like};return E(()=>{p.value.delete===!0&&b()}),L(()=>{f&&b()}),(c,n)=>(l(),h("div",{class:a(["my_profile_conatiner",s(e)?"themeBgwhite":"themeBgblack"])},[t("div",J,[O(R,{src:o.value.user_logo||s(U),preview:"",width:"220px",height:"220px",style:{overflow:"hidden","border-radius":"50%"},balance:""},null,8,["src"]),t("div",K,[t("h2",Q,[F(m(o.value.user_name)+" ",1),o.value.user_name?V("",!0):(l(),h("div",W))]),t("div",X,[t("button",{disabled:!o.value.id},[o.value.id?(l(),A(s(z),{key:1,to:{name:"editUsers",params:{id:o.value.id}}},{default:q(()=>n[2]||(n[2]=[F(" редактировать ")])),_:1},8,["to"])):(l(),h("div",ee))],8,Z),n[3]||(n[3]=t("button",null,"настройки",-1))]),t("div",te,[t("div",se,[t("h3",{class:a(s(e)?"input_light":"input_night")},m(u.value.length||0)+" постов ",3),t("h3",{class:a(s(e)?"input_light":"input_night")},m(r.value||0)+" лайков ",3),t("h3",{class:a(s(e)?"input_light":"input_night")},m(w.value||0)+" друзей ",3)]),t("h3",{class:a(s(e)?"input_light":"input_night")},m(x.value)+" человек добавили вас в друзья ",3)]),t("p",{class:a(["biographies",s(e)?"input_light":"input_night"])},m(o.value.biography?o.value.biography:"Нет биографии"),3)])]),t("div",oe,[t("div",{class:a(["liked-text",s(e)?"borderLight":"borderNight"])},[t("button",{onClick:n[0]||(n[0]=I=>i.value=!1),class:a([s(e)?"color_light":"color_night",{btnAct:!i.value}])}," Публикации ",2),t("button",{onClick:n[1]||(n[1]=I=>i.value=!0),class:a([s(e)?"color_light":"color_night",{btnAct:i.value}])}," Понравилось ",2)],2),t("div",{class:a(["liked",s(e)?"themeBgwhite":"themeBgblack"])},[!i.value&&s(p).delete===!1?(l(),A(Y,{key:0,option:u.value},null,8,["option"])):V("",!0),i.value&&s(p).delete===!1?(l(),A(H,{key:1,option:o.value.post_like,user_id:o.value.id},null,8,["option","user_id"])):V("",!0)],2)])],2))}},re=C(ie,[["__scopeId","data-v-62f9a8a6"]]);export{re as default};
