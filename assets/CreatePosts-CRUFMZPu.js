import{_ as C,r as u,u as P,o as D,a as g,b as a,n as _,e as l,q as f,C as U,v as j,x as z,t as N,y as R,i as p,j as x,k as y,z as q}from"./index-BRXagnaY.js";import{a as E}from"./add_img-CmauYyjt.js";import{I}from"./Input-Bhthltra.js";const F={class:"createpost_container"},G={class:"con_img"},H={class:"input-container"},Y={class:"input-container"},J={class:"textarea-container"},K=["placeholder"],L={class:"input-container"},O=["value","disabled"],Q={key:1,class:"loadBtn",type:"button"},W={__name:"CreatePosts",setup(X){const k=q(),i=p("theme"),S=p("urlAdressAuth"),B=p("urlAdressPosts"),b=p("user_Id"),o=u(""),r=u(""),n=u(""),d=u(!0),c=u([]),v=u(null),{t:m}=P(),V=async t=>{try{const e=await x.get(`${S}?user_id=${t}`);c.value=e.data[0]}catch(e){console.log(e)}},T=()=>{const t=new Date;let e=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),h=t.getFullYear(),M=String(t.getHours()).padStart(2,"0"),A=String(t.getMinutes()).padStart(2,"0");return`${e}.${s}.${h} ${M}:${A}`},w=async()=>{let t=Math.floor(1e4+Math.random()*9e4);if((await x.get(B)).data.filter(h=>h.image_id===t).length>0){w();return}v.value=t},$=async()=>{d.value=!1;try{await x.post(B,{user_id:c.value.user_id,image:o.value,title:r.value,description:n.value,like:0,date:T(),user_logo:c.value.user_logo,user_name:c.value.user_name,image_id:v.value}),o.value="",r.value="",n.value="",v.value=null,d.value=!0,k.push("/posts")}catch(t){console.log(t),d.value=!0}};return D(()=>{b&&(V(b),w())}),(t,e)=>(y(),g("div",F,[a("div",G,[a("div",{class:_(["div_img",l(i)?"themeBgwhite":"themeBgblack"])},[f(U,{src:o.value||l(E),class:"border-style"},null,8,["src"])],2)]),a("form",{onSubmit:e[3]||(e[3]=R(s=>$(),["prevent"])),class:"add-form"},[a("div",H,[f(I,{type:"text",width:"100%",height:"100%",BgTheme:l(i)?"themeBgwhite":"themeBgblack",placeholder:l(m)("create_posts.text1"),modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s)},null,8,["BgTheme","placeholder","modelValue"])]),a("div",Y,[f(I,{type:"text",width:"100%",height:"100%",BgTheme:l(i)?"themeBgwhite":"themeBgblack",maxleng:40,placeholder:l(m)("create_posts.text2"),modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value=s)},null,8,["BgTheme","placeholder","modelValue"])]),a("div",J,[j(a("textarea",{class:_(l(i)?"themeBgwhite input_light":"themeBgblack input_night"),maxlength:"500",placeholder:l(m)("create_posts.text3"),"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s)},null,10,K),[[z,n.value]]),a("b",null,N(n.value.length)+"/500",1)]),a("div",L,[d.value?(y(),g("input",{key:0,type:"submit",value:l(m)("create_posts.text4"),disabled:!o.value||!r.value||!n.value,class:_({"disabled-input":!o.value||!r.value||!n.value})},null,10,O)):(y(),g("button",Q,e[4]||(e[4]=[a("div",{class:"loader"},null,-1)])))])],32)]))}},ae=C(W,[["__scopeId","data-v-82c2f492"]]);export{ae as default};
