import{_ as B}from"./Loading-Blq4iCsM.js";import{P as I}from"./Post-DQVrrsXo.js";import{_ as L,r as i,c as O,w as b,o as $,a as o,b as h,d as f,u as d,F as j,e as F,n as k,f as N,t as S,g as w,i as l,h as x,j as t,I as E,p as z}from"./index-popTO3JP.js";const D={class:"w-[750px] flex items-start justify-between"},M=["disabled"],T={class:"posts_container"},U={key:1,class:"loader_container"},q={key:2,class:"loader"},G={__name:"Posts",setup(H){const m=i(!1);z("updateSub",m);const g=l("theme"),A=l("urlAdressAuth"),C=l("urlAdressPosts"),v=l("searchPosts"),p=l("confirmation"),y=l("user_Id"),a=i([]),P=i({}),r=i(!1),n=i(!1),_=O(()=>a.value.filter(s=>s.title.toLowerCase().includes(v.value.toLowerCase())||s.description.toLowerCase().includes(v.value.toLowerCase()))),c=async()=>{try{const[s,e]=await Promise.all([x.get(`${A}?user_id=${y}`),x.get(C)]);P.value=await s.data[0],a.value=await e.data.reverse(),r.value=e.data.length===0,p.value.subscribe===!0&&(m.value=!0)}catch(s){console.log(s),r.value=!0}},V=()=>{n.value=!0,c()};return b(()=>{p.value.delete===!0&&c()}),b(()=>{p.value.subscribe===!0&&c()}),$(()=>{y&&c()}),(s,e)=>(t(),o("div",D,[h("button",{onClick:e[1]||(e[1]=u=>V()),disabled:n.value,class:"updateBtn"},[n.value?(t(),f(B,{key:0,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u)},null,8,["modelValue"])):(t(),f(d(E),{key:1,icon:"system-uicons:reset",width:"50",height:"50",class:"duration-300 hover:rotate-[-20deg]",style:{color:"#00bd7e"}}))],8,M),h("div",T,[_.value.length!==0&&a.value.length!==0?(t(!0),o(j,{key:0},F(_.value,u=>(t(),f(I,{key:u.id,postOption:u,userOption:P.value},null,8,["postOption","userOption"]))),128)):(t(),o("div",U,[!r.value&&_.value.length===0&&a.value.length>0?(t(),o("h2",{key:0,class:k(d(g)?"input_light":"input_night")},[e[2]||(e[2]=N(" Нет постов по вашему запросу ")),h("span",null,'"'+S(d(v))+'"',1)],2)):w("",!0),r.value&&a.value.length===0?(t(),o("h2",{key:1,class:k(d(g)?"input_light":"input_night")}," Нет постов. ",2)):!r.value&&a.value.length===0?(t(),o("div",q)):w("",!0)]))])]))}},R=L(G,[["__scopeId","data-v-d43abfea"]]);export{R as default};
